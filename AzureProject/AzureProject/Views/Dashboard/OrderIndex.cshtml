@inject Microsoft.AspNetCore.Http.IHttpContextAccessor HttpContextAccessor
<head>
    <style>
    body {
    background-image: url('data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAkGBwgICAcHCAcHBwcHBwoHBwcHBw8ICQcKFREWFiARHxMYKCggGBolGx8TITEhJSkrLi4uFx8zODMsNygtLisBCgoKDQ0NDg0NDysZFRk3NystLTctKysrKy0rKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrK//AABEIAM0A9gMBIgACEQEDEQH/xAAXAAEBAQEAAAAAAAAAAAAAAAAAAQIF/8QAFhABAQEAAAAAAAAAAAAAAAAAAAER/8QAGAEBAQEBAQAAAAAAAAAAAAAAAQACBQT/xAAWEQEBAQAAAAAAAAAAAAAAAAAAEQH/2gAMAwEAAhEDEQA/AO4A9riACQAkAJACQChIKIIKJIKJIKJIASAJACQAkAJACQAkAJAKEiioIYoEAqSCiCCiSCiSCiKYmKJIKFMiiSAEgCQAkAoSKKgiihIKAAKqkFAkUEgBARRFBRJBQ1IiiSChLIokyKFIASqgyBQABRIBQEFAgFSQUAQUSQUSQUJRFFUgokiKEoihSI0hKI0hSqDIFAAUAgUAAVJBQJFBIAQAEUFEkFEkRQpBUJQVCkFQlBQoUVkAKEiigIoBAoAAJAoggoEgokgqEoKJIKhSCoigoUyKhKChKgoACgAKAAoSKAAKCpBcVVIKKhEaFSyKKpBUKQVEkFCURQlEVCkFCVBQAFAAUABQgUZACpIKBIKJIKJIKJIihTIoSiKFIihKIqEooFCgEoKAAoAoMgUAgUAMFEkFwSQXBJMRpEkFQlBUKRGkJRFQpBUJQUJFRYAKACqkVkCgEKKAAoCKKEhiiSCokgoUiKEsioSiNIUiKhKCo0UBSgFCFRYzoUFZApFAAUAFAgFAQUCQUSRFCkRQlEqo0URSkpUVKcSJVRogBJFSLABqIsGgUgyliosAUFZACgAKyAFSRFEkRQlEqo0UFQpKi1CUSqVosgNFAoSLEWAKqRWdCwhCBKoMhYqRQBQZCqigAsGQiKUpKi1CUAaKJVqVopUVCUKUrRRAaKUKEv/Z');
    background-repeat: no-repeat;
    background-size:cover;
    font-size:large;
    }
    </style>
</head>
<body>
   <h1>Order History</h1>
   <br />
<div class="container">
    <table class="table table-bordered table-hover">
        <tr class="bg-success text-white">
            <th>OrderId</th>
            <th>UserID</th>
            <th>ProductId</th>
            <th>Product Name</th>
            <th>Price</th>
            <th>Order Status</th>
            <th>Actions</th>
        </tr>
            @{
                try
                {
                    if(TempData["Orders"]!=null)
                    {
                        var role=HttpContextAccessor.HttpContext.Session.GetInt32("role");
                                      
                        var user= HttpContextAccessor.HttpContext.Session.GetInt32("userid");

                        foreach(var x in (List<AzureProject.Models.Orders>)TempData["Orders"])
                        {
                            if(@x.UserID==user)
                            {
                                <tr class="table-light">
                                <td>@x.OrderId</td>
                                <td>@x.UserID</td>
                                <td>@x.ProductId</td>
                                <td>@x.ProductName</td>
                                <td>@x.Price</td>
                                <td>@x.status</td>
                                <td>
                                 <a href="~/Dashboard/DeleteOrder?id=@x.OrderId" class="btn btn-outline-danger">Cancel Order</a>
                                </td>
                                </tr>

                            }
                            else if(role==1)
                            {
                                <tr class="table-light">
                                <td>@x.OrderId</td>
                                <td>@x.UserID</td>
                                <td>@x.ProductId</td>
                                <td>@x.ProductName</td>
                                <td>@x.Price</td>
                                <td>@x.status</td>
                                <td>
                                 <a href="~/Dashboard/DeleteOrder?id=@x.OrderId" class="btn btn-outline-danger">Cancel Order</a>
                                 <a href="~/Dashboard/UpdateOrder?id=@x.OrderId" class="btn btn-outline-primary ">Update Order Status</a>
                        
                                        
                                  
                         
                                </td>
                                </tr>

                            }
                        }
                }
            }
            catch
            {
                
            }
        }
    </table>

</div>
</body>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}

@{
    try
    {
        if(TempData["DeleteMsg"] !=null)
        {
            if(TempData["DeleteMsg"] != "1")
            {
                <script>
                swal("Good job!", "Order Cancelled Successfully!", "success");
                </script>
            }
            
        }
    }
    catch
    {
        
    }
}

